# pyfingrid
Fingrid Datahub API for Python.

## Disclaimer
At the moment this is a proof of concept. The API is not yet complete and the code is not yet documented.

## Conceptual description
[Fingrid Datahub](https://data.fingrid.fi/) uses strong authentication. The code uses the [Selenium](https://selenium-python.readthedocs.io/) library to launch Chorme browser which you can use to log in normally. Once the login is complete, the code reads the Datahub session variables from the cookies and saves them to a textfile.

The API calls to fetch data from the Datahub are made using [requests](https://pypi.org/project/requests/) library. We first read the session variables from a textfile and use them to authenticate the API calls. The text file can obviously be copied to another computer if you want to run the data fetching scripts for example using a Raspberry Pi.

In the future the data is planned to be returned as a Pandas DataFrame.

## Dependencies
Install the following dependencies:
```
pip install selenium
pip install webdriver_manager
pip install pytz
```
## Usage
The code is still a work-in-progress and the API must not be considered stable.

The following script opens Chrome browser so that you can log in to the Datahub using strong authentication. It saves the session variables to session.txt in the same directory. This script also reads the agreements from the Datahub API and prints the metering point number(s) as an output.
```
python datahub-authenticate.py
```
To read consumption data from the Datahub API, first edit `constant.py` and update:

- Your metering point number
- Full path to session.txt, which was generated by the authentication script.
- Full path to a logfile where logs will be written

An example script that fetches consumption data using the session variables from session.txt. Copy this script and modify it to fit your needs.
```
python datahub-consumption.py
```
